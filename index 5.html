<!DOCTYPE html>
<html lang="en-GB">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>OurTrade — Built by trades. Powered by community.</title>
<meta name="description" content="OurTrade MVP single-file app: Home, Projects, and Profile.">
<style>
  :root {
    --bg:#0b1311; --panel:#0f1d19; --muted:#96b3a8; --text:#eaf6f1;
    --brand:#1ad294; --brand-2:#13a976; --brand-3:#7af2c6; --accent:#ffd166;
    --line:rgba(255,255,255,.08); --radius:16px;
  }
  @media (prefers-color-scheme: light) {
    :root{ --bg:#f5faf8; --panel:#fff; --text:#0b1613; --muted:#4d6d62; --line:#e4efe9;
           --brand:#0f8a63; --brand-2:#12b07d; --brand-3:#7be6c4; }
  }
  *{box-sizing:border-box} html,body{margin:0;padding:0}
  body{font-family:ui-sans-serif,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg);}
  a{color:inherit;text-decoration:none}
  .container{max-width:1120px;margin:0 auto;padding:0 20px}
  header.nav{position:sticky;top:0;z-index:50;border-bottom:1px solid var(--line);
    backdrop-filter:saturate(150%) blur(10px);background:color-mix(in oklab, var(--bg) 60%, transparent)}
  .nav-inner{height:64px;display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:12px;font-weight:900;letter-spacing:.2px}
  .logo{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;
        background:radial-gradient(100% 100% at 30% 20%, var(--brand-3), var(--brand));color:#04231a;font-weight:900}
  nav ul{display:flex;list-style:none;gap:14px;padding:0;margin:0}
  nav a{padding:8px 12px;border-radius:10px;color:var(--muted)}
  nav a.active, nav a:hover{background:color-mix(in oklab, var(--brand) 12%, transparent);color:var(--text)}
  .menu-btn{display:none;background:none;border:none;color:var(--text);font-size:22px}
  .mobile-menu{display:none;border-top:1px solid var(--line);padding:12px 0}
  .mobile-menu a{display:block;padding:10px 0;color:var(--muted)}
  .mobile-menu a.active{color:var(--text)}
  .btn{display:inline-block;padding:12px 16px;border-radius:12px;font-weight:800;border:2px solid var(--brand)}
  .btn.primary{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#061b14;border:none}
  .btn.ghost{color:var(--brand);background:color-mix(in oklab, var(--brand) 8%, var(--panel))}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);padding:18px;
        box-shadow:0 10px 30px rgba(0,0,0,.25),0 2px 8px rgba(0,0,0,.2)}
  .section{padding:40px 0}
  h1{font-size:clamp(30px,5.6vw,54px);line-height:1.02;margin:0 0 12px}
  h2{margin:0 0 16px;font-size:28px}
  .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
  .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
  .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:14px}
  .kpi{text-align:center;border:1px solid var(--line);border-radius:14px;padding:12px;background:color-mix(in oklab,var(--panel) 85%, var(--brand-3) 0%)}
  .kpi b{display:block;font-size:26px;background:linear-gradient(90deg,var(--brand-3),var(--brand));-webkit-background-clip:text;background-clip:text;color:transparent}
  input,select,textarea{width:100%;padding:12px;border:1px solid color-mix(in oklab, var(--line) 0%, #dbeae4);border-radius:12px;background:#fff;color:#0b1613}
  label{display:block;margin:0 0 6px;color:var(--muted)}
  .muted{color:var(--muted)}
  .hero .wrap{display:grid;grid-template-columns:1.2fr 1fr;gap:28px;padding:56px 0 28px}
  .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;background:color-mix(in oklab,var(--brand) 10%, var(--panel));
         color:color-mix(in oklab, var(--brand) 70%, var(--text));border:1px solid var(--line);border-radius:999px;font-weight:800;font-size:12px}
  .thumb{height:140px;border-radius:12px;border:1px solid var(--line);
          background:linear-gradient(180deg,color-mix(in oklab,var(--brand) 12%, transparent), transparent),
                     repeating-conic-gradient(from 0deg, color-mix(in oklab,var(--brand-3) 30%, transparent) 0 10deg, transparent 10deg 20deg)}
  table{width:100%;border-collapse:collapse}
  th,td{border-bottom:1px solid var(--line);padding:10px;text-align:left}
  .hidden{display:none !important}
  footer{margin-top:40px;border-top:1px solid var(--line);background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 80%, transparent), #08120f)}
  .foot{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:22px 0;flex-wrap:wrap;color:var(--muted)}
  @media (max-width:980px){
    .hero .wrap,.grid-3,.grid-2,.kpis{grid-template-columns:1fr}
    nav ul{display:none}
    .menu-btn{display:block}
  }
</style>
</head>
<body>
<header class="nav">
  <div class="container nav-inner">
    <div class="brand">
      <div class="logo">OT</div><div>OurTrade</div>
    </div>
    <nav>
      <button class="menu-btn" id="menuBtn" aria-label="Menu">☰</button>
      <ul id="mainNav">
        <li><a href="#home" data-route="home" class="active">Home</a></li>
        <li><a href="#posts" data-route="posts">Projects</a></li>
        <li><a href="#profile" data-route="profile">Profile</a></li>
      </ul>
    </nav>
  </div>
  <div class="container mobile-menu" id="mobileMenu">
    <a href="#home" data-route="home" class="active">Home</a>
    <a href="#posts" data-route="posts">Projects</a>
    <a href="#profile" data-route="profile">Profile</a>
  </div>
</header>

<main id="views">
  <!-- HOME -->
  <section id="view-home" class="section">
    <div class="container hero">
      <div class="wrap">
        <div>
          <span class="badge">Live MVP • Eastbourne first</span>
          <h1>Built by trades. <br>Powered by community.</h1>
          <p class="muted">Post your project, compare quotes from trusted local pros, and grab monthly material deals from merchants.</p>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <a class="btn primary" href="#post" onclick="scrollToPost(event)">Post a project</a>
            <a class="btn ghost" href="#posts" data-route="posts" onclick="goto(event,'posts')">View projects</a>
          </div>
          <div class="kpis">
            <div class="kpi"><b>£10</b><small>Project post (Free plan)</small></div>
            <div class="kpi"><b>£5</b><small>Project post (Paid plans)</small></div>
            <div class="kpi"><b>Pro</b><small>Priority listing</small></div>
            <div class="kpi"><b>Local</b><small>Eastbourne & South Coast</small></div>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 8px">What you can do</h3>
          <ul style="margin:0; padding-left:18px; line-height:1.8;">
            <li>Homeowners: post a project and compare quotes.</li>
            <li>Trades: build a profile, quote fast, win work.</li>
            <li>Suppliers: feature your <b>Deal of the Month</b> site‑wide.</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container section" id="post">
      <h2>Post a project</h2>
      <form id="projectForm" class="card">
        <div class="grid-2">
          <div><label>Project title</label><input name="title" required placeholder="e.g. Kitchen fit incl. electrics"></div>
          <div><label>Budget (approx.)</label><input name="budget" placeholder="e.g. £5,000"></div>
        </div>
        <div class="grid-2" style="margin-top:10px;">
          <div><label>Postcode</label><input name="postcode" required placeholder="e.g. BN21"></div>
          <div><label>When to start</label>
            <select name="start"><option>ASAP</option><option>Within 2 weeks</option><option>Next month</option><option>Flexible</option></select>
          </div>
        </div>
        <div style="margin-top:10px;"><label>Describe your project</label><textarea name="details" rows="4" placeholder="Tell us what needs doing…"></textarea></div>
        <div class="grid-2" style="margin-top:10px;">
          <div><label>Your name</label><input name="name" required></div>
          <div><label>Email</label><input name="email" type="email" required></div>
        </div>
        <div style="display:flex; gap:10px; align-items:center; margin-top:12px; flex-wrap:wrap;">
          <button class="btn primary" type="submit">Submit project</button>
          <small class="muted">Demo: stored locally in your browser.</small>
        </div>
      </form>
    </div>

    <div class="container section">
      <h2>Deals of the Month</h2>
      <div class="grid-3">
        <div class="card"><div class="thumb"></div><div><b>4x2 C24 Timber</b><div>£1.50 / metre (June)</div><small class="muted">Alsfords • Carpentry</small></div></div>
        <div class="card"><div class="thumb"></div><div><b>Copper Pipe 15mm</b><div>£5.99 / 3m</div><small class="muted">PlumbWorld • Plumbing</small></div></div>
        <div class="card"><div class="thumb"></div><div><b>T&E Cable 2.5mm</b><div>£28 / 50m</div><small class="muted">CEF • Electrical</small></div></div>
      </div>
    </div>
  </section>

  <!-- POSTS -->
  <section id="view-posts" class="section hidden">
    <div class="container">
      <div style="display:flex;align-items:end;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <h2>Projects</h2>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <input id="search" placeholder="Search title, postcode, budget…" style="min-width:220px;">
          <button class="btn" onclick="exportCSV()">Export CSV</button>
          <a class="btn ghost" href="#home" data-route="home" onclick="goto(event,'home')">← Back to Home</a>
        </div>
      </div>
      <div id="postsList" class="section card" style="padding:0">
        <table>
          <thead><tr><th>Title</th><th>Budget</th><th>Postcode</th><th>Start</th><th>Name</th><th>Email</th><th>Created</th></tr></thead>
          <tbody id="postsBody"><tr><td colspan="7" class="muted" style="padding:18px">No projects yet. Submit one from Home.</td></tr></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- PROFILE -->
  <section id="view-profile" class="section hidden">
    <div class="container">
      <h2>LM Projects — General Builder</h2>
      <div class="grid-2">
        <div class="card">
          <p><b>Based:</b> Eastbourne, UK • 30+ years experience</p>
          <p><b>Services:</b> Carpentry, kitchens, bathrooms, extensions, flooring, decking</p>
          <p><b>Coverage:</b> East Sussex & nearby</p>
          <p><b>Email:</b> <a href="mailto:info@lm-projects.co.uk">info@lm-projects.co.uk</a></p>
          <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;">
            <span class="badge">Carpentry</span><span class="badge">Kitchens</span><span class="badge">Bathrooms</span><span class="badge">Renovations</span>
          </div>
        </div>
        <div class="card">
          <b>Recent work</b>
          <ul>
            <li>Kitchen fitout & electrics — BN21</li>
            <li>Bathroom refit — BN25</li>
            <li>Garden decking — BN20</li>
          </ul>
          <b>Reviews</b>
          <ul>
            <li>“Top‑quality finish, on time.” — Sarah H.</li>
            <li>“Reliable and tidy, recommended.” — James P.</li>
          </ul>
          <a class="btn primary" href="mailto:info@lm-projects.co.uk?subject=Quote%20request%20via%20OurTrade">Contact LM Projects</a>
        </div>
      </div>
      <div style="margin-top:12px">
        <a class="btn ghost" href="#posts" data-route="posts" onclick="goto(event,'posts')">See current projects</a>
        <a class="btn ghost" href="#home" data-route="home" onclick="goto(event,'home')">← Back to Home</a>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="container foot">
    <div style="display:flex;align-items:center;gap:10px">
      <div class="logo" style="width:28px;height:28px;border-radius:8px">OT</div><b>OurTrade</b>
    </div>
    <small>© 2025 OurTrade • Eastbourne, UK • <a href="#" onclick="alert('Coming soon')">Terms</a> • <a href="#" onclick="alert('Coming soon')">Privacy</a></small>
  </div>
</footer>

<script>
  // Router: switch visible section based on hash
  const views = { home: document.getElementById('view-home'),
                  posts: document.getElementById('view-posts'),
                  profile: document.getElementById('view-profile') };
  const navLinks = document.querySelectorAll('[data-route]');
  function show(route) {
    Object.entries(views).forEach(([k,el])=>el.classList.toggle('hidden', k!==route));
    navLinks.forEach(a=>a.classList.toggle('active', a.dataset.route===route));
    if (route==='posts') renderPosts();
    document.getElementById('mobileMenu').style.display='none';
  }
  function goto(e, route) { e && e.preventDefault(); location.hash = route; }
  window.addEventListener('hashchange', () => show((location.hash||'#home').substring(1)));
  show((location.hash||'#home').substring(1));

  // Mobile menu
  const mb = document.getElementById('menuBtn');
  mb && mb.addEventListener('click', ()=>{
    const mm = document.getElementById('mobileMenu');
    mm.style.display = mm.style.display==='block' ? 'none' : 'block';
  });

  // Smooth scroll to post form
  function scrollToPost(e) {
    e.preventDefault();
    document.getElementById('post').scrollIntoView({behavior:'smooth'});
  }

  // Form storage
  const form = document.getElementById('projectForm');
  form && form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form).entries());
    const list = JSON.parse(localStorage.getItem('ourtrade_projects')||'[]');
    list.push({...data, createdAt: new Date().toISOString()});
    localStorage.setItem('ourtrade_projects', JSON.stringify(list));
    alert('Project submitted! (Demo only — stored locally)');
    form.reset();
  });

  // Posts view logic
  const bodyEl = document.getElementById('postsBody');
  const searchEl = document.getElementById('search');
  function renderPosts() {
    const q = (searchEl?.value||'').toLowerCase();
    const rows = JSON.parse(localStorage.getItem('ourtrade_projects')||'[]')
      .filter(p => !q || JSON.stringify(p).toLowerCase().includes(q))
      .map(p => `<tr>
        <td>${p.title||''}</td>
        <td>${p.budget||''}</td>
        <td>${p.postcode||''}</td>
        <td>${p.start||''}</td>
        <td>${p.name||''}</td>
        <td>${p.email||''}</td>
        <td>${new Date(p.createdAt).toLocaleString()}</td>
      </tr>`).join('');
    bodyEl.innerHTML = rows || `<tr><td colspan="7" class="muted" style="padding:18px">No projects yet. Submit one from Home.</td></tr>`;
  }
  searchEl && searchEl.addEventListener('input', renderPosts);

  // Export CSV
  function exportCSV() {
    const items = JSON.parse(localStorage.getItem('ourtrade_projects')||'[]');
    if (!items.length) return alert('No projects to export yet.');
    const headers = ['title','budget','postcode','start','details','name','email','createdAt'];
    const lines = [headers.join(',')].concat(items.map(p => headers.map(h => 
      ('"' + String(p[h]||'').replace(/"/g,'""') + '"')
    ).join(',')));
    const blob = new Blob([lines.join('\n')], {type:'text/csv'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'ourtrade_projects.csv';
    a.click();
    URL.revokeObjectURL(a.href);
  }
  window.exportCSV = exportCSV; window.goto = goto; window.scrollToPost = scrollToPost;
</script>
</body>
</html>
